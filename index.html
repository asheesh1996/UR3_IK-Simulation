<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>UR3 IK</title>
    <link rel="stylesheet" type="text/css" href="./styles/global.css">
  </head>
  <body style="text-align: center"> 
    <canvas id="unity-canvas" style="background: url('Build/') no-repeat center center fixed"></canvas>
    <body>
      <div id="loader">
        <img class="logo" src="logo.png">
        <div class="spinner"></div>
        <div class="progress"><div class="full"></div></div>
      </div>
    </body>

    <script src="Build/UR3_IK-Simulation.loader.js"></script>
    <script>
      var buildUrl = "Build";
      var config = {
        dataUrl: buildUrl + "/UR3_IK-Simulation.data",
        frameworkUrl: buildUrl + "/UR3_IK-Simulation.framework.js",
        codeUrl: buildUrl + "/UR3_IK-Simulation.wasm",
        streamingAssetsUrl: "StreamingAssets",
        companyName: "DefaultCompany",
        productName: "UR3 IK",
        productVersion: "0.1",
      };

      var gameInstance = createUnityInstance(
        document.querySelector("#unity-canvas"),
        config,
        UnityProgress);

      function UnityProgress(progress) {
        var loader = document.querySelector("#loader");
        var loaderProgress = document.querySelector("#loader .progress");

        var progressBar = loader.querySelector(".full");
        
        loaderProgress.style.display = "block";
        progressBar = loaderProgress.querySelector(".full");
        loader.querySelector(".spinner").style.display = "none";
        progressBar.style.transform = `scaleX(${progress})`;

        if (progress === 1) {
          loader.style.display = "none";
        }
      }
    </script>
  </body>
</html>
